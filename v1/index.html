

<head>
    <meta name="description" content="A timing tool for Breath of the Wild Individual Level runs">
    <title> Breath of the Wild IL Timer</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="styles.css">
</head>
<!--

   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ #   % &@@@@@@@@@@@@@@@@@@@@@@@.(   (.@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#(     %(@@@@@@@@@@@@@@@@@@@@@@@ /   .*(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@/%@@@/   /@@@@@@@@@@@@@@@@@@@@@@@@@@@///&@@/ /@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@,*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,.&@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,*@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@ &@@@@@@@@@@@@@@@@@@@@@@@@@@@@%(@@@@@@@@@@@@@@@@@@@@@@@@@@@@*.&@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@ %@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*  .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@(/@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(*@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@ &@@@@@@@@@@@@@@@&  (@@@@@@@@@@@       ,@@@@@@@@@@#   .@@@@@@@@@@@@@@@@ (@@@@@@@@@@@@@
@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@&     ,@@@@@@@, ,*****  @@@@@&.      /@@@@@@@@@@@@@@@@@.(@@@@@@@@@@@@
@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@&       ,#@@@@@@@@@@@@@@@@@@@@(      #@@@@@@@@@@@@@@@@@@*/@@@@@@@@@@@
@@@@@@@@@@@.@@@@@@@@@@@@@@@@@@@&   (@@@@@@@(            *&@@@@@@@( .@@@@@@@@@@@@@@@@@@@@.(@@@@@@@@@@
@@@@@@@@@@/*@@@@@@@@@@@@@@@@@@@@(@@@@@,      /* (/(( ,/(      #@@@@@@@@@@@@@@@@@@@@@@@@@@ &@@@@@@@@@
@@@@@@@@@@ &@@@@@@@@@@@@@/ @@@@@@@(    /&@(.&@@@%(((@@@& /@&*    *@@@@@@@(,@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@(/*./@@@@@@@@@@@@  .&&(.    (@@@@.*@@          &@% &@@@(     (&&(  /@@@@@@@@@@&.*(/,(@@@@@@@
@@@@@@,(     &.@@@@@@@@@@@*      (@@@@@@@&@@    /@@%    #@@@@@@@@@@.      #@@@@@@@@@@/(.    /*/@@@@@
@@@@@@ /     / @@@@@@@@@@@@@@@@(  #@@@@@%#@@    (@@#    (@@(@@@@@&  ,@@@@@@@@@@@@@@@@/%     /*(@@@@@
@@@@@@@(.##/ (@@@@@@@@@@@@@@@@@@@/  #@@@@ &@@*         (@@ &@@@%  .@@@@@@@@@@@@@@@@@@@@/*// (@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(   (@@/ @@@@#(/(@@@& ,@@(   (@@@@@@@@@@@@@@@@@@@@@@@@*/@@@@@@@@@
@@@@@@@@@@.&@@@@@@@@@@@@@@@@@@@@@@@@@@&*   .//  .(((. (,    /%@@@@@@@@@@@@@@@@@@@@@@@@@@@.&@@@@@@@@@
@@@@@@@@@@&.@@@@@@@@@&@@@@@@@@@@@@@@@@@@@@@@%(*,    ,((%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.(@@@@@@@@@@
@@@@@@@@@@@(*@&*.(#@@@*/@@@@@@@@@@@@@@@@@@@@@@@@/   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*(@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@    #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#(@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@( #@@@@@@@@@@@@@@@@@@@&    /@@@@@@@@@@@@@@%///(/@@@@@@@@@@@@ (@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@&  (@@@@@@@@@@@@@@@@,     %@@@@@@@@@@@@@/    ((@@@@@@@@@.*@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@%.%@@@%* #@@@@@@@@@@@#      ,@@@@@@@@@@@&.//,,,#@@@@@@@@/ /@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@&,..&@@@@@@@@@@@@(. %@@@@@@        (@@@@@@*.(%@@@@@@@@@@@@@@& (@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@/   (%@@@@@@@@@@@@@*@@@@@@@        (@@@@@@%*@@@@@@@@@@@@@@(*(@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@/((@@@@@@@@@@@@@@*@@@@@@@&        (@@@@@@@@*@@@@@@@@@@( (@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.*  @@@@@@@@@@      (@@@@@@@@@(,@@@@@(..(@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%/     *&@@@@@@@@@@&%@@@@@@@@@@@@@& / *(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (   / @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Just Looking under the hood? @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  @@@@@@@@@@@@@@@@@@@@@@@ https://github.com/PrinceKomali/BotW-IL-Timer/ @@@@@@@@@@@@@@@@@@@@@@@@@






-->

<body>
  <label for="vidfile" class="btn">Open Run</label>
 <div id="inputcontainer">
  <input id="vidfile" type="file" style="visibility:hidden;"/>
</div>
<input type = "text" id = "url"><button onclick = "load()">Open from Youtube (Beta)</button>
    <br><br>
    <b>Current Time: <span id="test">0:00.000</span></b><br><br>
    <button onclick="go(150)">Forward 5s</button>
    <button onclick="go(-150)">Backwards 5s</button><br>
    <button onclick="go(1)">Frame Advance</button>
    <button onclick="go(-1)">Frame Advance -1</button>
    <button onclick="go(15)">Forward 15f</button><br>
    <button onclick="start()">Set Start</button>
    <button onclick="end()">Set End</button>
    <button onclick="total()" class="outline2">Get Framecount</button><br>
    <p>Advance <input type="text" id="t3input" size="1" />m <input type="text" id="t2input" size="1" />s <input type="text" id="tinput" size="1" />f  <button onclick="customgo()">Advance</button></p>
    <p> You can enter negative times to go backwards</p>
    <p>Go to Timestamp <input type="text" id="ti3input" size="1" />m <input type="text" id="ti2input" size="1" />s <input type="text" id="tiinput" size="1" />f  <button onclick="timestamp()">Go!</button>
    <br><video id="vid" controls="False" src="#" width=640 height=360></video><br>
     <p> Start Time: <span id="start">0:00.000</span> | End time: <span id="end">0:00.000</span> | <span class="outline">Framecount: <span id="total">0:00.000</span></span></p><br>
    <button onclick="reset()">Restart Video</button><br>
    <br><br><br>
    <h4>How To Use:</h4>
    <p>1) Import your video file at the top of the page.<br>
        2) Use the Frame Advance buttons (or the arrow keys) to find the first fade-in frame Link is visible after the elevator cutscene<br>
        3) Click "Set Start"<br>
        4) Use the Frame Advance buttons again to find the first frame the A button lights up when clicking the "Examine" prompt<br>
        5) Click "Set End" and then click "Get Framecount"
        <br>Your framecount should be labled under the video</p><br><br>
    <p style="font-size:10">Made by <a style="font-size:10" href="https://www.youtube.com/channel/UCoKZGYMKo_KTIXiWUYxVPKA"> Komali</a> on YouTube</p>
    <script>
      
function load() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      //document.getElementById("url").innerHTML =
      //this.responseText;
      var vid = document.getElementById("vid")
      
      vid.src = this.responseText


    }
  };
  var vurl = document.getElementById("url");
  console.log(vurl.value)
  console.log("https://expressytdl.komali09.repl.co/dl?" + vurl.value)
  xhttp.open("GET", "https://expressytdl.komali09.repl.co/dl?url=" + vurl.value, true);
  xhttp.send();
}








         document.body.onkeydown = function(e) {
    if (e.keyCode == 39) {
      go(1);
    }
    if (e.keyCode == 37) {
      go(-1);
    }
  }
function setInputFilter(textbox, inputFilter) {
    ["input", "keydown", "keyup", "mousedown", "mouseup", "select", "contextmenu", "drop"].forEach(function(event) {
        textbox.addEventListener(event, function() {
            if (inputFilter(this.value)) {
                this.oldValue = this.value;
                this.oldSelectionStart = this.selectionStart;
                this.oldSelectionEnd = this.selectionEnd;
            } else if (this.hasOwnProperty("oldValue")) {
                this.value = this.oldValue;
                this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
            } else {
                this.value = "";
            }
        });
    });
}

var youtput;
var vid = document.getElementById("vid");
var x = document.getElementById("vidfile").files[0];
var y = document.getElementById("test");
window.addEventListener('load', function() {
    setInputFilter(document.getElementById("tinput"), function(value) {
        return /^-?\d*$/.test(value);
    });
    vid.removeAttribute("controls")
    document.querySelector('input[type="file"]').addEventListener('change', function() {
        vid.removeAttribute("controls")
        if (this.files && this.files[0]) {
            var img = document.querySelector('video'); // $('img')[0]
            img.src = URL.createObjectURL(this.files[0]); // set src to blob url
            img.onload = imageIsLoaded;
        }
    });
});

var time;
var st = 0;
var nd = 0;
//setInterval(y.innerHTML = vid.currentTime, 1);

function reset() {
    vid.currentTime = "0.0";
    youtput = 0.000;
    y.innerHTML = "0:00.000";
}

function go(z) {
    vid.pause();
    vid.currentTime = vid.currentTime + (z / 30)
    var time = vid.currentTime
   var goM = Math.floor(time / 60)

   if(time - (goM * 60) < 10){
    y.innerHTML = goM + ":0" + (time-(60*goM)).toFixed(3)
   }else{
     y.innerHTML = goM + ":" + (time-(60*goM)).toFixed(3)
   
  }
}
function timestamp() {
   var value = parseInt(document.getElementById("tiinput").value)
    var value2 = parseInt(document.getElementById("ti2input").value)
    var value3 = parseInt(document.getElementById("ti3input").value)
    if(isNaN(value)) value = 0
    if(isNaN(value2)) value2 = 0
    if(isNaN(value3)) value3 = 0
    
    value = value + (value2 * 30) + (value3 * 30 * 60)
      vid.pause();
    vid.currentTime = (value / 30)
    var time = vid.currentTime
   var goM = Math.floor(time / 60)

   if(time - (goM * 60) < 10){
    y.innerHTML = goM + ":0" + (time-(60*goM)).toFixed(3)
   }else{
     y.innerHTML = goM + ":" + (time-(60*goM)).toFixed(3)
   
  }

}

function customgo() {
    var value = parseInt(document.getElementById("tinput").value)
    var value2 = parseInt(document.getElementById("t2input").value)
    var value3 = parseInt(document.getElementById("t3input").value)
    if(isNaN(value)) value = 0
    if(isNaN(value2)) value2 = 0
    if(isNaN(value3)) value3 = 0
    value = value + (value2 * 30) + (value3 * 30 * 60)
    
    go(value)
}

function start() {
    st = vid.currentTime
   var stM = Math.floor(st / 60);//vid.currentTime.toFixed(3);
   if(nd-(stM * 60) < 10){
     document.getElementById("start").innerHTML = stM + ":0" + (st-(60*stM)).toFixed(3)
   }else{
     document.getElementById("start").innerHTML = stM + ":" + (st-(60*stM)).toFixed(3)
   }
}

function end() {

    nd = vid.currentTime
   // var dispEnd = nd;

   var endM = Math.floor(nd / 60);//vid.currentTime.toFixed(3);
  // if(endM > 1){

   if(nd-(endM*60) < 10){
     document.getElementById("end").innerHTML = endM + ":0" + (nd-(60*endM)).toFixed(3)
   }else{
     document.getElementById("end").innerHTML = endM + ":" + (nd-(60*endM)).toFixed(3)
   }


}

function total() {
    var fc = (nd - st + (1 / 30));
    var m = Math.floor(fc / 60);//vid.currentTime.toFixed(3);
    
   if(fc-(m * 60) < 10){
     document.getElementById("total").innerHTML = m + ":0" + (fc-(m * 60)).toFixed(3)
   }else{
     document.getElementById("total").innerHTML = m + ":" + (fc-(m * 60)).toFixed(3)
   }
    
}//???
    </script>
</body>
